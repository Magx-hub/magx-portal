import{c as A,j as e,P as g,U as v}from"./index-T203nUT_.js";import{r as d}from"./router-DwwGQyGz.js";import{s as R,a as Y,c as w,d as C,u as Z,q as D,w as G,g as O,b as B,e as ee,o as T,f as I}from"./firebase-CvZXCE_Y.js";import{d as j}from"./config-Dwf6l8zu.js";import{C as te}from"./chart-pie-AzNKT_7x.js";import{T as se}from"./trending-up-CLpOAihk.js";import"./vendor-c5ypKtDW.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],N=A("building",re);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],ne=A("refresh-ccw",ae);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],k=A("user-check",le),de=async(t,s,n)=>{try{const r={fullname:t,department:s,gender:n,createdAt:R(),updatedAt:R()};return(await Y(w(j,"students"),r)).id}catch(r){throw console.error("Error adding student:",r),r}},S=async()=>{try{const t=D(w(j,"students"),T("fullname","asc")),s=await O(t),n=[];return s.forEach(r=>{n.push({id:r.id,...r.data()})}),n}catch(t){throw console.error("Error getting students:",t),t}},ce=async t=>{try{const s=C(j,"students",t),n=await ee(s);return n.exists()?{id:n.id,...n.data()}:null}catch(s){throw console.error("Error getting student by ID:",s),s}},oe=async(t,s,n,r)=>{try{const a=C(j,"students",t);return await Z(a,{fullname:s,department:n,gender:r,updatedAt:R()}),!0}catch(a){throw console.error("Error updating student:",a),a}},ie=async t=>{try{const s=D(w(j,"attendance"),G("studentId","==",t)),r=(await O(s)).docs.map(a=>B(C(j,"attendance",a.id)));return await Promise.all(r),await B(C(j,"students",t)),!0}catch(s){throw console.error("Error deleting student:",s),s}},ue=async t=>{try{return(await S()).filter(r=>r.fullname.toLowerCase().includes(t.toLowerCase())||r.department.toLowerCase().includes(t.toLowerCase()))}catch(s){throw console.error("Error searching students:",s),s}},me=async()=>{try{const t=await S(),s=new Set(t.map(n=>n.department));return{totalStudents:t.length,totalDepartments:s.size}}catch(t){throw console.error("Error getting student statistics:",t),t}},xe=async()=>{try{const t=await S(),s={};return t.forEach(r=>{const a=r.department;s[a]=(s[a]||0)+1}),Object.entries(s).map(([r,a])=>({department:r,studentCount:a})).sort((r,a)=>a.studentCount-r.studentCount)}catch(t){throw console.error("Error getting department statistics:",t),t}},he=async()=>{try{const t=await S(),s={};return t.forEach(r=>{const a=r.gender;s[a]=(s[a]||0)+1}),Object.entries(s).map(([r,a])=>({gender:r,count:a})).sort((r,a)=>a.count-r.count)}catch(t){throw console.error("Error getting gender statistics:",t),t}},ge=async()=>{try{const t=await S(),s=new Set(t.map(a=>a.department)),n=t.filter(a=>a.gender==="Male").length,r=t.filter(a=>a.gender==="Female").length;return{totalStudents:t.length,maleCount:n,femaleCount:r,totalDepartments:s.size}}catch(t){throw console.error("Error getting student summary:",t),t}},P=()=>{const[t,s]=d.useState([]),[n,r]=d.useState(!0),[a,l]=d.useState(null);d.useEffect(()=>{const o=D(w(j,"students"),T("fullname","asc")),u=I(o,b=>{const p=[];b.forEach(f=>{p.push({id:f.id,...f.data()})}),s(p),r(!1),l(null)},b=>{console.error("Error listening to students:",b),l(b.message),r(!1)});return()=>u()},[]);const m=d.useCallback(async(o,u,b)=>{try{return l(null),await de(o,u,b)}catch(p){throw l(p.message),p}},[]),x=d.useCallback(async(o,u,b,p)=>{try{return l(null),await oe(o,u,b,p)}catch(f){throw l(f.message),f}},[]),c=d.useCallback(async o=>{try{return l(null),await ie(o)}catch(u){throw l(u.message),u}},[]),i=d.useCallback(async o=>{try{return l(null),await ce(o)}catch(u){throw l(u.message),u}},[]);return{students:t,loading:n,error:a,addStudent:m,updateStudent:x,deleteStudent:c,getStudentById:i}},be=t=>{const[s,n]=d.useState([]),[r,a]=d.useState(!0),[l,m]=d.useState(null);return d.useEffect(()=>{if(!t){n([]),a(!1);return}const x=D(w(j,"students"),G("department","==",t),T("fullname","asc")),c=I(x,i=>{const o=[];i.forEach(u=>{o.push({id:u.id,...u.data()})}),n(o),a(!1),m(null)},i=>{console.error("Error listening to students by department:",i),m(i.message),a(!1)});return()=>c()},[t]),{students:s,loading:r,error:l}},pe=()=>{const[t,s]=d.useState([]),[n,r]=d.useState(!1),[a,l]=d.useState(null),m=d.useCallback(async c=>{if(!c||c.trim().length===0){s([]);return}try{r(!0),l(null);const i=await ue(c.trim());s(i)}catch(i){l(i.message),s([])}finally{r(!1)}},[]),x=d.useCallback(()=>{s([]),l(null)},[]);return{searchResults:t,searching:n,error:a,searchStudents:m,clearSearch:x}},fe=()=>{const[t,s]=d.useState({studentStats:null,departmentStats:[],genderStats:[],summary:null}),[n,r]=d.useState(!0),[a,l]=d.useState(null),m=d.useCallback(async()=>{try{r(!0),l(null);const[c,i,o,u]=await Promise.all([me(),xe(),he(),ge()]);s({studentStats:c,departmentStats:i,genderStats:o,summary:u})}catch(c){l(c.message)}finally{r(!1)}},[]);d.useEffect(()=>{m()},[m]);const x=d.useCallback(()=>{m()},[m]);return{...t,loading:n,refreshStats:x}},_=({student:t,onClose:s,onSave:n})=>{const[r,a]=d.useState(""),[l,m]=d.useState(""),[x,c]=d.useState(""),[i,o]=d.useState(!1),[u,b]=d.useState(""),{addStudent:p,updateStudent:f}=P();d.useEffect(()=>{t&&(a(t.fullname),m(t.department),c(t.gender))},[t]);const z=async y=>{y.preventDefault(),o(!0),b("");try{t?await f(t.id,r,l,x):await p(r,l,x),n()}catch(M){b(M.message)}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-black",children:t?"Edit Student":"Add New Student"}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 text-2xl font-light",onClick:s,children:"×"})]}),u&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mx-6 mt-4",children:u}),e.jsxs("form",{onSubmit:z,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullname",className:"block text-sm font-medium text-black mb-1",children:"Full Name"}),e.jsx("input",{id:"fullname",type:"text",value:r,onChange:y=>a(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-black mb-1",children:"Department"}),e.jsx("input",{id:"department",type:"text",value:l,onChange:y=>m(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-black mb-1",children:"Gender"}),e.jsxs("select",{id:"gender",value:x,onChange:y=>c(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-black bg-gray-200 hover:bg-gray-300 rounded-md disabled:opacity-50",onClick:s,disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md disabled:opacity-50",disabled:i,children:i?"Saving...":t?"Update":"Add"})]})]})]})})};_.propTypes={student:g.shape({id:g.string,fullname:g.string,department:g.string,gender:g.string}),onClose:g.func.isRequired,onSave:g.func.isRequired};const E=({students:t,loading:s,error:n,onEdit:r,onDelete:a})=>s?e.jsx("div",{className:"flex justify-center items-center py-8 text-gray-600",children:"Loading students..."}):n?e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:["Error: ",n]}):t.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No students found"}):e.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(l=>e.jsx("li",{className:"py-4 px-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-medium text-black truncate",children:l.fullname}),e.jsxs("p",{className:"text-sm text-gray-600",children:[l.department," • ",l.gender]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{className:"px-3 py-1 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded transition-colors",onClick:()=>r(l),children:"Edit"}),e.jsx("button",{className:"px-3 py-1 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-100 rounded transition-colors",onClick:()=>a(l.id),children:"Delete"})]})]})},l.id))});E.propTypes={students:g.arrayOf(g.shape({id:g.string,fullname:g.string,department:g.string,gender:g.string})).isRequired,loading:g.bool.isRequired,error:g.string,onEdit:g.func.isRequired,onDelete:g.func.isRequired};const ye=({studentStats:t,departmentStats:s,genderStats:n,summary:r,loading:a,onRefresh:l})=>{const[m,x]=d.useState("overview");return a?e.jsx("div",{className:"w-full max-w-6xl mx-auto p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading statistics..."})]})})}):e.jsxs("div",{className:"w-full max-w-6xl mx-auto p-4 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-2xl shadow-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Student Statistics"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Analytics and insights"})]}),e.jsxs("button",{onClick:l,className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-xl font-medium transition-colors flex items-center gap-2 backdrop-blur-sm",children:[e.jsx(ne,{size:16}),e.jsx("span",{children:"Refresh"})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-1",children:e.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>x("overview"),className:`flex-1 py-3 px-4 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 ${m==="overview"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(te,{size:16}),e.jsx("span",{children:"Overview & Demographics"})]}),e.jsxs("button",{onClick:()=>x("departments"),className:`flex-1 py-3 px-4 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 ${m==="departments"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(N,{size:16}),e.jsx("span",{children:"Departments"})]})]})}),m==="overview"&&e.jsxs("div",{className:"space-y-6",children:[t&&e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 text-center hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(v,{size:24,className:"text-blue-600"})}),e.jsx("div",{className:"text-3xl font-bold text-black mb-1",children:t.total||0}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Students"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 text-center hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(k,{size:24,className:"text-blue-600"})}),e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:t.male||0}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Male Students"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 text-center hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(k,{size:24,className:"text-pink-600"})}),e.jsx("div",{className:"text-3xl font-bold text-pink-600 mb-1",children:t.female||0}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Female Students"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 text-center hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(v,{size:24,className:"text-purple-600"})}),e.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:t.other||0}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Other Genders"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-black mb-4 flex items-center gap-2",children:[e.jsx(v,{size:20,className:"text-blue-600"}),"Gender Distribution"]}),n&&n.length>0?e.jsx("div",{className:"space-y-3",children:n.map((c,i)=>{const o=b=>{switch(b?.toLowerCase()){case"male":return"bg-blue-100 text-blue-600";case"female":return"bg-pink-100 text-pink-600";default:return"bg-purple-100 text-purple-600"}},u=t?.total?Math.round(c.count/t.total*100):0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${o(c.gender)}`,children:e.jsx(v,{size:16})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-black capitalize",children:c.gender}),e.jsxs("div",{className:"text-xs text-gray-500",children:[u,"% of total"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold text-black",children:c.count}),e.jsx("div",{className:"text-xs text-gray-600",children:"students"})]})]},c.gender||i)})}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(v,{size:24,className:"mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No gender data available"})]})]}),r&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-black mb-4 flex items-center gap-2",children:[e.jsx(se,{size:20,className:"text-blue-600"}),"Quick Summary"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(v,{size:16,className:"text-gray-600"})}),e.jsx("span",{className:"font-medium text-black",children:"Total Students"})]}),e.jsx("span",{className:"text-xl font-bold text-black",children:r.totalStudents})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(k,{size:16,className:"text-blue-600"})}),e.jsx("span",{className:"font-medium text-blue-700",children:"Male Students"})]}),e.jsx("span",{className:"text-xl font-bold text-blue-600",children:r.maleCount})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-pink-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-pink-100 rounded-lg flex items-center justify-center",children:e.jsx(k,{size:16,className:"text-pink-600"})}),e.jsx("span",{className:"font-medium text-pink-700",children:"Female Students"})]}),e.jsx("span",{className:"text-xl font-bold text-pink-600",children:r.femaleCount})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(N,{size:16,className:"text-green-600"})}),e.jsx("span",{className:"font-medium text-green-700",children:"Departments"})]}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:r.totalDepartments})]})]})]})]})]}),m==="departments"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-black mb-6 flex items-center gap-2",children:[e.jsx(N,{size:20,className:"text-blue-600"}),"Students by Department"]}),s&&s.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((c,i)=>{const o=r?.totalStudents?Math.round(c.count/r.totalStudents*100):0;return e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(N,{size:20,className:"text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-black truncate",children:c.department}),e.jsxs("div",{className:"text-sm text-gray-600",children:[o,"% of total"]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-black",children:c.count}),e.jsx("div",{className:"text-sm text-gray-600",children:"Students"})]})]},c.department||i)})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(N,{size:32,className:"mx-auto mb-3 text-gray-400"}),e.jsx("p",{children:"No department data available"})]})]})]})},je=({onSearch:t,searching:s,results:n,onClear:r,onEdit:a,onDelete:l})=>{const[m,x]=d.useState(""),c=o=>{o.preventDefault(),t(m)},i=()=>{x(""),r()};return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("form",{onSubmit:c,className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("input",{type:"text",placeholder:"Search students by name or department...",value:m,onChange:o=>x(o.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-black"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:s,children:s?"Searching...":"Search"}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-200 text-black rounded-md hover:bg-gray-300",onClick:i,children:"Clear"})]})]}),s?e.jsx("div",{className:"text-center py-8 text-black",children:"Searching..."}):e.jsx(E,{students:n,loading:!1,error:null,onEdit:a,onDelete:l})]})},De=()=>{const[t,s]=d.useState("all"),[n,r]=d.useState(""),[a,l]=d.useState(null),[m,x]=d.useState(!1),{students:c,loading:i,error:o,deleteStudent:u}=P(),{students:b,loading:p}=be(n),{searchResults:f,searching:z,searchStudents:y,clearSearch:M}=pe(),{studentStats:U,departmentStats:Q,genderStats:H,summary:J,loading:K,refreshStats:q}=fe(),V=[...new Set(c.map(h=>h.department))],F=async h=>{if(window.confirm("Are you sure you want to delete this student?"))try{await u(h),q()}catch(X){console.error("Failed to delete student:",X)}},L=h=>{l(h),x(!0)},$=()=>{x(!1),l(null),q()},W=()=>{switch(t){case"all":return e.jsx(E,{students:c,loading:i,error:o,onEdit:L,onDelete:F});case"department":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("label",{htmlFor:"department-select",className:"text-sm font-medium text-gray-700",children:"Filter by Department:"}),e.jsxs("select",{id:"department-select",value:n,onChange:h=>r(h.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Departments"}),V.map(h=>e.jsx("option",{value:h,children:h},h))]})]}),e.jsx(E,{students:n?b:c,loading:n?p:i,error:o,onEdit:L,onDelete:F})]});case"search":return e.jsx(je,{onSearch:y,searching:z,results:f,onClear:M,onEdit:L,onDelete:F});case"stats":return e.jsx(ye,{studentStats:U,departmentStats:Q,genderStats:H,summary:J,loading:K,onRefresh:q});default:return null}};return e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Management"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",onClick:()=>x(!0),children:"Add New"})]}),e.jsx("nav",{className:"flex space-x-1 border-b border-gray-200 mb-6",children:["all","department","search","stats"].map(h=>e.jsxs("button",{className:`px-4 py-2 text-sm font-medium rounded-t-md transition-colors ${t===h?"bg-white border-t border-l border-r border-gray-200 text-blue-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,onClick:()=>s(h),children:[h==="all"&&"All Students",h==="department"&&"By Department",h==="search"&&"Search",h==="stats"&&"Statistics"]},h))}),e.jsx("main",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-2",children:W()}),m&&e.jsx(_,{student:a,onClose:$,onSave:$})]})};export{De as default};
