import{c as D,b as F,j as e,C as R,U as p,d as U,e as O,f as B,g as H}from"./index-CJvqPIiD.js";import{r as x}from"./router-pa-sX1nh.js";import"./vendor-c5ypKtDW.js";import"./firebase-DgZFjSEB.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],j=D("building",I);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],K=D("refresh-ccw",J);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],z=D("user-check",P),Q=({student:t,onClose:d,onSave:l})=>{const[n,u]=x.useState(""),[a,i]=x.useState(""),[c,r]=x.useState(""),[o,m]=x.useState(!1),[b,g]=x.useState(""),{addStudent:f,updateStudent:y}=F();x.useEffect(()=>{t&&(u(t.fullname),i(t.department),r(t.gender))},[t]);const v=async h=>{h.preventDefault(),m(!0),g("");try{t?await y(t.id,n,a,c):await f(n,a,c),l()}catch(N){g(N.message)}finally{m(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-black",children:t?"Edit Student":"Add New Student"}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 text-2xl font-light",onClick:d,children:"×"})]}),b&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mx-6 mt-4",children:b}),e.jsxs("form",{onSubmit:v,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullname",className:"block text-sm font-medium text-black mb-1",children:"Full Name"}),e.jsx("input",{id:"fullname",type:"text",value:n,onChange:h=>u(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-black mb-1",children:"Department"}),e.jsx("input",{id:"department",type:"text",value:a,onChange:h=>i(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-black mb-1",children:"Gender"}),e.jsxs("select",{id:"gender",value:c,onChange:h=>r(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-black bg-gray-200 hover:bg-gray-300 rounded-md disabled:opacity-50",onClick:d,disabled:o,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md disabled:opacity-50",disabled:o,children:o?"Saving...":t?"Update":"Add"})]})]})]})})},C=({students:t,loading:d,error:l,onEdit:n,onDelete:u})=>d?e.jsx("div",{className:"flex justify-center items-center py-8 text-gray-600",children:"Loading students..."}):l?e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:["Error: ",l]}):t.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No students found"}):e.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(a=>e.jsx("li",{className:"py-4 px-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-medium text-black truncate",children:a.fullname}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.department," • ",a.gender]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{className:"px-3 py-1 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded transition-colors",onClick:()=>n(a),children:"Edit"}),e.jsx("button",{className:"px-3 py-1 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-100 rounded transition-colors",onClick:()=>u(a.id),children:"Delete"})]})]})},a.id))}),V=({studentStats:t,departmentStats:d,genderStats:l,summary:n,loading:u,onRefresh:a})=>{const[i,c]=x.useState("overview");return u?e.jsx("div",{className:"w-full max-w-6xl mx-auto p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading statistics..."})]})})}):e.jsxs("div",{className:"w-full max-w-6xl mx-auto p-4 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-2xl shadow-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Student Statistics"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Analytics and insights"})]}),e.jsxs("button",{onClick:a,className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-xl font-medium transition-colors flex items-center gap-2 backdrop-blur-sm",children:[e.jsx(K,{size:16}),e.jsx("span",{children:"Refresh"})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-1",children:e.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>c("overview"),className:`flex-1 py-3 px-4 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 ${i==="overview"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(R,{size:16}),e.jsx("span",{children:"Overview"})]}),e.jsxs("button",{onClick:()=>c("departments"),className:`flex-1 py-3 px-4 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 ${i==="departments"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(j,{size:16}),e.jsx("span",{children:"Departments"})]}),e.jsxs("button",{onClick:()=>c("demographics"),className:`flex-1 py-3 px-4 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 ${i==="demographics"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(p,{size:16}),e.jsx("span",{children:"Demographics"})]})]})}),i==="overview"&&e.jsxs("div",{className:"space-y-6",children:[t&&e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 text-center hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(p,{size:24,className:"text-blue-600"})}),e.jsx("div",{className:"text-3xl font-bold text-black mb-1",children:t.total||0}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Students"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 text-center hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(z,{size:24,className:"text-blue-600"})}),e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:t.male||0}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Male Students"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 text-center hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(z,{size:24,className:"text-pink-600"})}),e.jsx("div",{className:"text-3xl font-bold text-pink-600 mb-1",children:t.female||0}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Female Students"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 text-center hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(p,{size:24,className:"text-purple-600"})}),e.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:t.other||0}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Other Genders"})]})]}),n&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-black mb-4 flex items-center gap-2",children:[e.jsx(U,{size:20,className:"text-blue-600"}),"Summary"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-black",children:n.totalStudents}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Students"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.maleCount}),e.jsx("div",{className:"text-sm text-blue-600",children:"Male Count"})]}),e.jsxs("div",{className:"bg-pink-50 rounded-xl p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-pink-600",children:n.femaleCount}),e.jsx("div",{className:"text-sm text-pink-600",children:"Female Count"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.totalDepartments}),e.jsx("div",{className:"text-sm text-green-600",children:"Departments"})]})]})]})]}),i==="departments"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-black mb-6 flex items-center gap-2",children:[e.jsx(j,{size:20,className:"text-blue-600"}),"Students by Department"]}),d&&d.length>0?e.jsx("div",{className:"space-y-3",children:d.map((r,o)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(j,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-black",children:r.department}),e.jsx("div",{className:"text-sm text-gray-600",children:"Department"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-black",children:r.count}),e.jsx("div",{className:"text-sm text-gray-600",children:"Students"})]})]},r.department||o))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(j,{size:32,className:"mx-auto mb-3 text-gray-400"}),e.jsx("p",{children:"No department data available"})]})]}),i==="demographics"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-black mb-6 flex items-center gap-2",children:[e.jsx(p,{size:20,className:"text-blue-600"}),"Students by Gender"]}),l&&l.length>0?e.jsx("div",{className:"space-y-3",children:l.map((r,o)=>{const m=b=>{switch(b?.toLowerCase()){case"male":return"bg-blue-100 text-blue-600";case"female":return"bg-pink-100 text-pink-600";default:return"bg-purple-100 text-purple-600"}};return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${m(r.gender)}`,children:e.jsx(p,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-black capitalize",children:r.gender}),e.jsx("div",{className:"text-sm text-gray-600",children:"Gender"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-black",children:r.count}),e.jsx("div",{className:"text-sm text-gray-600",children:"Students"})]})]},r.gender||o)})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(p,{size:32,className:"mx-auto mb-3 text-gray-400"}),e.jsx("p",{children:"No gender data available"})]})]})]})},W=({onSearch:t,searching:d,results:l,onClear:n,onEdit:u,onDelete:a})=>{const[i,c]=x.useState(""),r=m=>{m.preventDefault(),t(i)},o=()=>{c(""),n()};return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("form",{onSubmit:r,className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("input",{type:"text",placeholder:"Search students by name or department...",value:i,onChange:m=>c(m.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-black"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:d,children:d?"Searching...":"Search"}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-200 text-black rounded-md hover:bg-gray-300",onClick:o,children:"Clear"})]})]}),d?e.jsx("div",{className:"text-center py-8 text-black",children:"Searching..."}):e.jsx(C,{students:l,loading:!1,error:null,onEdit:u,onDelete:a})]})},te=()=>{const[t,d]=x.useState("all"),[l,n]=x.useState(""),[u,a]=x.useState(null),[i,c]=x.useState(!1),{students:r,loading:o,error:m,deleteStudent:b}=F(),{students:g,loading:f}=O(l),{searchResults:y,searching:v,searchStudents:h,clearSearch:N}=B(),{studentStats:E,departmentStats:L,genderStats:T,summary:A,loading:G,refreshStats:w}=H(),$=[...new Set(r.map(s=>s.department))],k=async s=>{if(window.confirm("Are you sure you want to delete this student?"))try{await b(s),w()}catch(_){console.error("Failed to delete student:",_)}},S=s=>{a(s),c(!0)},M=()=>{c(!1),a(null),w()},q=()=>{switch(t){case"all":return e.jsx(C,{students:r,loading:o,error:m,onEdit:S,onDelete:k});case"department":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("label",{htmlFor:"department-select",className:"text-sm font-medium text-gray-700",children:"Filter by Department:"}),e.jsxs("select",{id:"department-select",value:l,onChange:s=>n(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Departments"}),$.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx(C,{students:l?g:r,loading:l?f:o,error:m,onEdit:S,onDelete:k})]});case"search":return e.jsx(W,{onSearch:h,searching:v,results:y,onClear:N,onEdit:S,onDelete:k});case"stats":return e.jsx(V,{studentStats:E,departmentStats:L,genderStats:T,summary:A,loading:G,onRefresh:w});default:return null}};return e.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Student Management"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",onClick:()=>c(!0),children:"Add New Student"})]}),e.jsx("nav",{className:"flex space-x-1 border-b border-gray-200 mb-6",children:["all","department","search","stats"].map(s=>e.jsxs("button",{className:`px-4 py-2 text-sm font-medium rounded-t-md transition-colors ${t===s?"bg-white border-t border-l border-r border-gray-200 text-blue-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,onClick:()=>d(s),children:[s==="all"&&"All Students",s==="department"&&"By Department",s==="search"&&"Search",s==="stats"&&"Statistics"]},s))}),e.jsx("main",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:q()}),i&&e.jsx(Q,{student:u,onClose:M,onSave:M})]})};export{te as default};
